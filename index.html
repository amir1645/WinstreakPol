<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ WinstreakPol - Professional Polygon Lottery</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <select id="languageSelect">
            <option value="en">English üá∫üá∏</option>
            <option value="fa">ŸÅÿßÿ±ÿ≥€å üáÆüá∑</option>
        </select>
    </div>

    <!-- Preloader -->
    <div id="preloader" class="preloader">
        <div class="preloader-content">
            <div class="lottery-spinner">
                <div class="spinner-wheel"></div>
                <div class="spinner-ball"></div>
            </div>
            <h2 class="brand-title">WinstreakPol</h2>
            <p class="brand-slogan">Your Gateway to Fortune</p>
            <p class="loading-text">Loading...</p>
        </div>
    </div>

    <!-- Background Animation -->
    <div class="background-animation">
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
            <div class="shape shape-5"></div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <i class="fas fa-trophy"></i>
                        <div class="logo-text">
                            <span class="brand-title">WinstreakPol</span>
                            <span class="brand-slogan">Your Gateway to Fortune</span>
                        </div>
                    </div>
                    <div class="network-badge">
                        <i class="fas fa-network-wired"></i>
                        <span class="network-text">Polygon</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div id="walletInfo" class="wallet-info" style="display: none;">
                        <i class="fas fa-wallet"></i>
                        <span id="walletAddress"></span>
                        <div class="wallet-balance">
                            <span id="maticBalance">0 MATIC</span>
                        </div>
                    </div>
                    <button id="connectWallet" class="connect-btn">
                        <i class="fas fa-plug"></i>
                        <span class="connect-text">Connect Wallet</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs-navigation">
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="dashboard">
                    <i class="fas fa-home"></i>
                    <span class="tab-text">Dashboard</span>
                </button>
                <button class="tab-btn" data-tab="lottery">
                    <i class="fas fa-ticket-alt"></i>
                    <span class="tab-text">Buy Tickets</span>
                </button>
                <button class="tab-btn" data-tab="winners">
                    <i class="fas fa-trophy"></i>
                    <span class="tab-text">Winners</span>
                </button>
                <button class="tab-btn" data-tab="profile">
                    <i class="fas fa-user"></i>
                    <span class="tab-text">My Profile</span>
                </button>
                <button class="tab-btn" data-tab="stats">
                    <i class="fas fa-chart-bar"></i>
                    <span class="tab-text">System Stats</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="tab-header">
                    <h1><i class="fas fa-home"></i> <span class="tab-title">Lottery Dashboard</span></h1>
                    <p class="tab-subtitle">Live status of lottery pools</p>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-card gradient-1">
                        <div class="stat-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-name">Ticket Price</h3>
                            <div id="ticketPrice" class="stat-value">11 MATIC</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-2">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-name">Tickets Sold</h3>
                            <div id="totalTickets" class="stat-value">0</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-3">
                        <div class="stat-icon">
                            <i class="fas fa-gift"></i>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-name">Prizes Distributed</h3>
                            <div id="totalPrizes" class="stat-value">0 MATIC</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-4">
                        <div class="stat-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-name">Contract Balance</h3>
                            <div id="contractBalance" class="stat-value">0 MATIC</div>
                        </div>
                    </div>
                </div>

                <!-- Lottery Pools -->
                <div class="pools-section">
                    <h2 class="section-title">
                        <i class="fas fa-chess-queen"></i>
                        <span class="section-title-text">Lottery Pools</span>
                    </h2>
                    <div class="pools-grid">
                        <!-- Pool 1 - Silver -->
                        <div class="pool-card pool-silver">
                            <div class="pool-header">
                                <div class="pool-badge">ü•à <span class="pool-badge-text">Silver</span></div>
                                <h3 class="pool-name">Pool 1</h3>
                            </div>
                            <div class="pool-body">
                                <div class="pool-stats">
                                    <div class="stat">
                                        <i class="fas fa-users"></i>
                                        <span class="stat-text">125 participants</span>
                                    </div>
                                    <div class="stat">
                                        <i class="fas fa-trophy"></i>
                                        <span class="stat-text">1 winner - 100% prize</span>
                                    </div>
                                </div>
                                <div class="pool-progress">
                                    <div class="progress-info">
                                        <span class="progress-label">Progress:</span>
                                        <span id="pool1Tickets" class="progress-value">0/125</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div id="pool1Progress" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="pool-prize">
                                    <i class="fas fa-gem"></i>
                                    <span id="pool1Prize" class="prize-value">0 MATIC</span>
                                </div>
                            </div>
                        </div>

                        <!-- Pool 2 - Gold -->
                        <div class="pool-card pool-gold">
                            <div class="pool-header">
                                <div class="pool-badge">ü•á <span class="pool-badge-text">Gold</span></div>
                                <h3 class="pool-name">Pool 2</h3>
                            </div>
                            <div class="pool-body">
                                <div class="pool-stats">
                                    <div class="stat">
                                        <i class="fas fa-users"></i>
                                        <span class="stat-text">500 participants</span>
                                    </div>
                                    <div class="stat">
                                        <i class="fas fa-trophy"></i>
                                        <span class="stat-text">2 winners - 80% / 20%</span>
                                    </div>
                                </div>
                                <div class="pool-progress">
                                    <div class="progress-info">
                                        <span class="progress-label">Progress:</span>
                                        <span id="pool2Tickets" class="progress-value">0/500</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div id="pool2Progress" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="pool-prize">
                                    <i class="fas fa-gem"></i>
                                    <span id="pool2Prize" class="prize-value">0 MATIC</span>
                                </div>
                            </div>
                        </div>

                        <!-- Pool 3 - Diamond -->
                        <div class="pool-card pool-diamond">
                            <div class="pool-header">
                                <div class="pool-badge">üíé <span class="pool-badge-text">Diamond</span></div>
                                <h3 class="pool-name">Pool 3</h3>
                            </div>
                            <div class="pool-body">
                                <div class="pool-stats">
                                    <div class="stat">
                                        <i class="fas fa-users"></i>
                                        <span class="stat-text">2500 participants</span>
                                    </div>
                                    <div class="stat">
                                        <i class="fas fa-trophy"></i>
                                        <span class="stat-text">3 winners - 70% / 20% / 10%</span>
                                    </div>
                                </div>
                                <div class="pool-progress">
                                    <div class="progress-info">
                                        <span class="progress-label">Progress:</span>
                                        <span id="pool3Tickets" class="progress-value">0/2500</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div id="pool3Progress" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="pool-prize">
                                    <i class="fas fa-gem"></i>
                                    <span id="pool3Prize" class="prize-value">0 MATIC</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lottery Tab -->
            <div id="lottery" class="tab-content">
                <div class="tab-header">
                    <h1><i class="fas fa-ticket-alt"></i> <span class="tab-title">Buy Lottery Tickets</span></h1>
                    <p class="tab-subtitle">Try your chance to win</p>
                </div>

                <div class="lottery-content">
                    <div class="ticket-purchase-card">
                        <div class="ticket-header">
                            <i class="fas fa-crown"></i>
                            <h2 class="ticket-title">Buy Lottery Tickets</h2>
                        </div>
                        
                        <div class="ticket-form">
                            <div class="form-group">
                                <label for="ticketCount">
                                    <i class="fas fa-ticket-alt"></i>
                                    <span class="label-text">Ticket Count</span>
                                </label>
                                <div class="input-with-buttons">
                                    <button class="quantity-btn" onclick="changeTicketCount(-1)">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" id="ticketCount" min="1" max="1000" value="1" class="ticket-input">
                                    <button class="quantity-btn" onclick="changeTicketCount(1)">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="form-hint">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="hint-text">Maximum 1000 tickets per transaction</span>
                                </div>
                            </div>

                            <div class="price-summary">
                                <div class="price-item">
                                    <span class="price-label">Ticket Price:</span>
                                    <span class="price-value">11 MATIC</span>
                                </div>
                                <div class="price-item total">
                                    <span class="price-label">Total Cost:</span>
                                    <span id="totalPrice" class="total-price">11 MATIC</span>
                                </div>
                            </div>

                            <button id="buyTickets" class="purchase-btn" disabled>
                                <i class="fas fa-shopping-cart"></i>
                                <span class="purchase-text">Buy Tickets</span>
                            </button>
                        </div>
                    </div>

                    <div class="ticket-info-card">
                        <h3><i class="fas fa-info-circle"></i> <span class="card-title">Ticket Information</span></h3>
                        <div class="user-tickets-info">
                            <div class="ticket-stats">
                                <div class="ticket-stat">
                                    <i class="fas fa-ticket-alt pool-1"></i>
                                    <div>
                                        <div class="stat-label">Pool 1</div>
                                        <div id="userPool1Tickets" class="stat-value">0 tickets</div>
                                    </div>
                                </div>
                                <div class="ticket-stat">
                                    <i class="fas fa-ticket-alt pool-2"></i>
                                    <div>
                                        <div class="stat-label">Pool 2</div>
                                        <div id="userPool2Tickets" class="stat-value">0 tickets</div>
                                    </div>
                                </div>
                                <div class="ticket-stat">
                                    <i class="fas fa-ticket-alt pool-3"></i>
                                    <div>
                                        <div class="stat-label">Pool 3</div>
                                        <div id="userPool3Tickets" class="stat-value">0 tickets</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Winners Tab -->
            <div id="winners" class="tab-content">
                <div class="tab-header">
                    <h1><i class="fas fa-trophy"></i> <span class="tab-title">Winners Wheel</span></h1>
                    <p class="tab-subtitle">Lucky lottery winners</p>
                </div>

                <div class="winners-content">
                    <!-- Wheel Section -->
                    <div class="wheel-section">
                        <div class="wheel-container">
                            <div class="wheel" id="wheel">
                                <div class="wheel-inner">
                                    <div class="wheel-center">
                                        <i class="fas fa-gem"></i>
                                    </div>
                                    <div class="wheel-segment"></div>
                                    <div class="wheel-segment"></div>
                                    <div class="wheel-segment"></div>
                                    <div class="wheel-segment"></div>
                                    <div class="wheel-segment"></div>
                                    <div class="wheel-segment"></div>
                                    <div class="wheel-segment"></div>
                                    <div class="wheel-segment"></div>
                                </div>
                            </div>
                            <div class="wheel-pointer">
                                <i class="fas fa-caret-down"></i>
                            </div>
                        </div>
                        
                        <div class="wheel-controls">
                            <button id="spinWheel" class="spin-btn">
                                <i class="fas fa-play"></i>
                                <span class="spin-text">Spin Wheel</span>
                            </button>
                        </div>
                    </div>

                    <!-- Winners List -->
                    <div class="winners-list-section">
                        <h3><i class="fas fa-list"></i> <span class="card-title">Recent Winners</span></h3>
                        <div id="recentWinners" class="winners-list">
                            <!-- Winners will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Tab -->
            <div id="profile" class="tab-content">
                <div class="tab-header">
                    <h1><i class="fas fa-user"></i> <span class="tab-title">My Profile</span></h1>
                    <p class="tab-subtitle">Your personal information and statistics</p>
                </div>

                <div class="profile-content">
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="profile-info">
                                <h3 id="profileAddress" class="profile-address">Wallet not connected</h3>
                                <p class="profile-network">Network: Polygon Mainnet</p>
                            </div>
                        </div>

                        <div class="profile-stats">
                            <div class="profile-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-ticket-alt"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-label">Total Tickets</span>
                                    <span id="profileTotalTickets" class="stat-value">0</span>
                                </div>
                            </div>
                            <div class="profile-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-chess-board"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-label">Rounds Participated</span>
                                    <span id="profileRounds" class="stat-value">0</span>
                                </div>
                            </div>
                            <div class="profile-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-label">Wins</span>
                                    <span id="profileWins" class="stat-value">0</span>
                                </div>
                            </div>
                            <div class="profile-stat">
                                <div class="stat-icon">
                                    <i class="fas fa-gem"></i>
                                </div>
                                <div class="stat-details">
                                    <span class="stat-label">Total Prize</span>
                                    <span id="profileTotalPrize" class="stat-value">0 MATIC</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P-Token to Polygon Converter -->
                    <div class="converter-card">
                        <h3><i class="fas fa-exchange-alt"></i> <span class="card-title">P-Token Converter</span></h3>
                        
                        <div class="converter-info">
                            <div class="price-display">
                                <div class="price-item">
                                    <span class="price-label">Current P-Token Price:</span>
                                    <span id="pTokenPrice" class="price-value">0 MATIC</span>
                                </div>
                                <div class="price-item">
                                    <span class="price-label">Your P-Token Balance:</span>
                                    <span id="pTokenBalance" class="price-value">0 P-Token</span>
                                </div>
                            </div>
                            
                            <div class="converter-form">
                                <div class="form-group">
                                    <label for="pTokenAmount">
                                        <i class="fas fa-coins"></i>
                                        <span class="label-text">P-Token Amount to Sell</span>
                                    </label>
                                    <div class="input-with-buttons">
                                        <button class="quantity-btn" onclick="changePTokenAmount(-1)">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" id="pTokenAmount" min="1" value="1" class="ticket-input">
                                        <button class="quantity-btn" onclick="changePTokenAmount(1)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <div class="form-hint">
                                        <i class="fas fa-info-circle"></i>
                                        <span class="hint-text">You will receive: <span id="estimatedMatic">0</span> MATIC</span>
                                    </div>
                                </div>

                                <div class="action-buttons">
                                    <button id="sellPTokens" class="sell-btn" disabled>
                                        <i class="fas fa-money-bill-wave"></i>
                                        <span class="sell-text">Sell P-Tokens</span>
                                    </button>
                                    
                                    <button id="refreshBalance" class="refresh-btn">
                                        <i class="fas fa-sync-alt"></i>
                                        <span class="refresh-text">Refresh Balance</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Tab -->
            <div id="stats" class="tab-content">
                <div class="tab-header">
                    <h1><i class="fas fa-chart-bar"></i> <span class="tab-title">System Statistics</span></h1>
                    <p class="tab-subtitle">Comprehensive lottery information</p>
                </div>

                <div class="stats-content">
                    <div class="stats-grid">
                        <div class="stat-chart-card">
                            <h3><i class="fas fa-chart-line"></i> <span class="card-title">Recent Activity</span></h3>
                            <div class="chart-placeholder">
                                <i class="fas fa-chart-bar"></i>
                                <p class="chart-text">Activity Chart</p>
                            </div>
                        </div>
                        
                        <div class="system-info-card">
                            <h3><i class="fas fa-info-circle"></i> <span class="card-title">System Information</span></h3>
                            <div class="system-stats">
                                <div class="system-stat">
                                    <i class="fas fa-wallet"></i>
                                    <div>
                                        <span class="system-label">Contract Address:</span>
                                        <span class="contract-address">0xdFC970...68e2Ec</span>
                                    </div>
                                </div>
                                <div class="system-stat">
                                    <i class="fas fa-network-wired"></i>
                                    <div>
                                        <span class="system-label">Network:</span>
                                        <span class="network-text">Polygon Mainnet</span>
                                    </div>
                                </div>
                                <div class="system-stat">
                                    <i class="fas fa-gas-pump"></i>
                                    <div>
                                        <span class="system-label">Gas Fee:</span>
                                        <span class="gas-text">Optimized</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Wallet Connection Modal -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Choose Wallet</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="wallet-options">
                    <!-- Mobile Wallets with Deep Links -->
                    <div class="wallet-option" data-wallet="metamask" data-deeplink="https://metamask.app.link/dapp/yourdomain.com">
                        <div class="wallet-icon">
                            <i class="fab fa-ethereum"></i>
                        </div>
                        <div class="wallet-info">
                            <h4>MetaMask</h4>
                            <p>Browser & Mobile</p>
                        </div>
                    </div>
                    
                    <div class="wallet-option" data-wallet="trustwallet" data-deeplink="https://link.trustwallet.com/dapp/yourdomain.com">
                        <div class="wallet-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="wallet-info">
                            <h4>Trust Wallet</h4>
                            <p>Mobile App</p>
                        </div>
                    </div>
                    
                    <div class="wallet-option" data-wallet="coinbase" data-deeplink="https://go.cb-w.com/dapp?url=yourdomain.com">
                        <div class="wallet-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="wallet-info">
                            <h4>Coinbase Wallet</h4>
                            <p>Browser & Mobile</p>
                        </div>
                    </div>
                    
                    <div class="wallet-option" data-wallet="safepal" data-deeplink="https://link.safepal.io/dapp?url=yourdomain.com">
                        <div class="wallet-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="wallet-info">
                            <h4>SafePal</h4>
                            <p>Mobile App</p>
                        </div>
                    </div>
                    
                    <div class="wallet-option" data-wallet="tokenpocket" data-deeplink="https://tp-lab.github.io/dapp-docs/dapp-dispatch.html?url=yourdomain.com">
                        <div class="wallet-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="wallet-info">
                            <h4>TokenPocket</h4>
                            <p>Multi-chain Wallet</p>
                        </div>
                    </div>
                    
                    <!-- Browser Extension Wallets -->
                    <div class="wallet-option" data-wallet="brave">
                        <div class="wallet-icon">
                            <i class="fab fa-brave"></i>
                        </div>
                        <div class="wallet-info">
                            <h4>Brave Wallet</h4>
                            <p>Browser Built-in</p>
                        </div>
                    </div>
                    
                    <div class="wallet-option" data-wallet="phantom">
                        <div class="wallet-icon">
                            <i class="fas fa-ghost"></i>
                        </div>
                        <div class="wallet-info">
                            <h4>Phantom</h4>
                            <p>Solana & Multi-chain</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>