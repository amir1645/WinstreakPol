<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>WinstreakPol - Polygon Lottery</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
</head>
<body>
    <!-- Preloader ููุจุงู -->
    <div id="preloader" class="preloader">
        <div class="preloader-content">
            <div class="lottery-spinner">
                <div class="spinner-wheel"></div>
                <div class="spinner-ball"></div>
            </div>
            <h2>WinstreakPol</h2>
            <p id="preloader-text">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</p>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Header ููุจุงู -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <i class="fas fa-trophy"></i>
                        <span id="logo-text">WinstreakPol</span>
                    </div>
                    <div class="network-badge">
                        <i class="fas fa-network-wired"></i>
                        <span id="network-text">Polygon</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="language-selector mobile-hidden">
                        <select id="languageSelect">
                            <option value="fa">ูุงุฑุณ</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    
                    <div id="walletInfo" class="wallet-info" style="display: none;">
                        <i class="fas fa-wallet"></i>
                        <span id="walletAddress"></span>
                        <div class="wallet-balance">
                            <span id="maticBalance">0 MATIC</span>
                        </div>
                    </div>
                    
                    <button id="connectWallet" class="connect-btn">
                        <i class="fas fa-plug"></i>
                        <span id="connect-text" class="mobile-hidden">ุงุชุตุงู ููุช</span>
                    </button>
                    
                    <!-- ููู ููุจุฑฺฏุฑ ููุจุงู -->
                    <button id="mobileMenuBtn" class="mobile-menu-btn">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- ููู ููุจุงู -->
        <div id="mobileMenu" class="mobile-menu">
            <div class="mobile-menu-header">
                <h3>ููู</h3>
                <button class="mobile-menu-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="mobile-menu-content">
                <div class="language-selector mobile-only">
                    <select id="mobileLanguageSelect">
                        <option value="fa">ูุงุฑุณ</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <div class="mobile-wallet-info" id="mobileWalletInfo" style="display: none;">
                    <div class="mobile-wallet-address">
                        <i class="fas fa-wallet"></i>
                        <span id="mobileWalletAddress"></span>
                    </div>
                    <div class="mobile-wallet-balance">
                        <span id="mobileMaticBalance">0 MATIC</span>
                    </div>
                </div>
                <button id="mobileDisconnect" class="mobile-disconnect-btn" style="display: none;">
                    <i class="fas fa-power-off"></i>
                    ูุทุน ุงุชุตุงู
                </button>
            </div>
        </div>

        <!-- Navigation Tabs ููุจุงู -->
        <nav class="tabs-navigation">
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="dashboard">
                    <i class="fas fa-home"></i>
                    <span id="tab-dashboard" class="tab-text">ุฏุงุดุจูุฑุฏ</span>
                </button>
                <button class="tab-btn" data-tab="lottery">
                    <i class="fas fa-ticket-alt"></i>
                    <span id="tab-lottery" class="tab-text">ุจูุท</span>
                </button>
                <button class="tab-btn" data-tab="ptoken">
                    <i class="fas fa-coins"></i>
                    <span id="tab-ptoken" class="tab-text">P-Token</span>
                </button>
                <button class="tab-btn" data-tab="winners">
                    <i class="fas fa-trophy"></i>
                    <span id="tab-winners" class="tab-text">ุจุฑูุฏฺฏุงู</span>
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="tab-header">
                    <h1><i class="fas fa-home"></i> <span id="dashboard-title">ุฏุงุดุจูุฑุฏ ูุงุชุฑ</span></h1>
                    <p id="dashboard-subtitle">ูุถุนุช ุฒูุฏู ุงุณุชุฎุฑูุง ูุงุชุฑ</p>
                </div>

                <!-- Quick Stats ููุจุงู -->
                <div class="quick-stats">
                    <div class="stat-card gradient-1">
                        <div class="stat-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-ticket-price">ููุช ุจูุท</h3>
                            <div id="ticketPrice" class="stat-value">0 MATIC</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-2">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-total-tickets">ุจูุท ูุฑูุฎุชู ุดุฏู</h3>
                            <div id="totalTickets" class="stat-value">0</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-3">
                        <div class="stat-icon">
                            <i class="fas fa-gift"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-total-prizes">ุฌูุงุฒ ุชูุฒุน ุดุฏู</h3>
                            <div id="totalPrizes" class="stat-value">0 MATIC</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-4">
                        <div class="stat-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="stat-contract-balance">ููุฌูุฏ ูุฑุงุฑุฏุงุฏ</h3>
                            <div id="contractBalance" class="stat-value">0 MATIC</div>
                        </div>
                    </div>
                </div>

                <!-- Lottery Pools -->
                <div class="pools-section">
                    <h2 class="section-title">
                        <i class="fas fa-chess-queen"></i>
                        <span id="pools-title">ุงุณุชุฎุฑูุง ูุงุชุฑ</span>
                    </h2>
                    <div class="pools-grid">
                        <!-- Pool 1 -->
                        <div class="pool-card pool-silver">
                            <div class="pool-header">
                                <div class="pool-badge">๐ฅ <span id="pool1-badge">ุงุณุชุฎุฑ ููุฑู</span></div>
                                <h3 id="pool1-title">ุงุณุชุฎุฑ ฑ</h3>
                            </div>
                            <div class="pool-body">
                                <div class="pool-stats">
                                    <div class="stat">
                                        <i class="fas fa-users"></i>
                                        <span id="pool1-participants">ฑฒต ุดุฑฺฉุชโฺฉููุฏู</span>
                                    </div>
                                    <div class="stat">
                                        <i class="fas fa-trophy"></i>
                                        <span id="pool1-winners">ฑ ุจุฑูุฏู - ฑฐฐ% ุฌุงุฒู</span>
                                    </div>
                                </div>
                                <div class="pool-progress">
                                    <div class="progress-info">
                                        <span id="pool1-progress-text">ูพุดุฑูุช:</span>
                                        <span id="pool1Tickets">0/125</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div id="pool1Progress" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="pool-prize">
                                    <i class="fas fa-gem"></i>
                                    <span id="pool1Prize">0 MATIC</span>
                                </div>
                            </div>
                        </div>

                        <!-- Pool 2 -->
                        <div class="pool-card pool-gold">
                            <div class="pool-header">
                                <div class="pool-badge">๐ฅ <span id="pool2-badge">ุงุณุชุฎุฑ ุทูุง</span></div>
                                <h3 id="pool2-title">ุงุณุชุฎุฑ ฒ</h3>
                            </div>
                            <div class="pool-body">
                                <div class="pool-stats">
                                    <div class="stat">
                                        <i class="fas fa-users"></i>
                                        <span id="pool2-participants">ตฐฐ ุดุฑฺฉุชโฺฉููุฏู</span>
                                    </div>
                                    <div class="stat">
                                        <i class="fas fa-trophy"></i>
                                        <span id="pool2-winners">ฒ ุจุฑูุฏู - ธฐ% / ฒฐ%</span>
                                    </div>
                                </div>
                                <div class="pool-progress">
                                    <div class="progress-info">
                                        <span id="pool2-progress-text">ูพุดุฑูุช:</span>
                                        <span id="pool2Tickets">0/500</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div id="pool2Progress" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="pool-prize">
                                    <i class="fas fa-gem"></i>
                                    <span id="pool2Prize">0 MATIC</span>
                                </div>
                            </div>
                        </div>

                        <!-- Pool 3 -->
                        <div class="pool-card pool-diamond">
                            <div class="pool-header">
                                <div class="pool-badge">๐ <span id="pool3-badge">ุงุณุชุฎุฑ ุงููุงุณ</span></div>
                                <h3 id="pool3-title">ุงุณุชุฎุฑ ณ</h3>
                            </div>
                            <div class="pool-body">
                                <div class="pool-stats">
                                    <div class="stat">
                                        <i class="fas fa-users"></i>
                                        <span id="pool3-participants">ฒตฐฐ ุดุฑฺฉุชโฺฉููุฏู</span>
                                    </div>
                                    <div class="stat">
                                        <i class="fas fa-trophy"></i>
                                        <span id="pool3-winners">ณ ุจุฑูุฏู - ทฐ% / ฒฐ% / ฑฐ%</span>
                                    </div>
                                </div>
                                <div class="pool-progress">
                                    <div class="progress-info">
                                        <span id="pool3-progress-text">ูพุดุฑูุช:</span>
                                        <span id="pool3Tickets">0/2500</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div id="pool3Progress" class="progress-fill" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div class="pool-prize">
                                    <i class="fas fa-gem"></i>
                                    <span id="pool3Prize">0 MATIC</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lottery Tab -->
            <div id="lottery" class="tab-content">
                <div class="tab-header">
                    <h1><i class="fas fa-ticket-alt"></i> <span id="lottery-title">ุฎุฑุฏ ุจูุท ูุงุชุฑ</span></h1>
                    <p id="lottery-subtitle">ุดุงูุณ ุฎูุฏ ุฑุง ุจุฑุง ุจุฑูุฏู ุดุฏู ุงูุชุญุงู ฺฉูุฏ</p>
                </div>

                <div class="lottery-content">
                    <div class="ticket-purchase-card">
                        <div class="ticket-header">
                            <i class="fas fa-crown"></i>
                            <h2 id="ticket-purchase-title">ุฎุฑุฏ ุจูุท ูุงุชุฑ</h2>
                        </div>
                        
                        <div class="ticket-form">
                            <div class="form-group">
                                <label for="ticketCount">
                                    <i class="fas fa-ticket-alt"></i>
                                    <span id="ticket-count-label">ุชุนุฏุงุฏ ุจูุท</span>
                                </label>
                                <div class="input-with-buttons">
                                    <button class="quantity-btn" onclick="changeTicketCount(-1)">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" id="ticketCount" min="1" max="1000" value="1" class="ticket-input">
                                    <button class="quantity-btn" onclick="changeTicketCount(1)">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="form-hint">
                                    <i class="fas fa-info-circle"></i>
                                    <span id="ticket-max-hint">ุญุฏุงฺฉุซุฑ ฑฐฐฐ ุจูุท ุฏุฑ ูุฑ ุชุฑุงฺฉูุด</span>
                                </div>
                            </div>

                            <div class="price-summary">
                                <div class="price-item">
                                    <span id="price-per-ticket">ููุช ูุฑ ุจูุท:</span>
                                    <span id="pricePerTicket">0 MATIC</span>
                                </div>
                                <div class="price-item total">
                                    <span id="total-cost">ูุฒูู ฺฉู:</span>
                                    <span id="totalPrice" class="total-price">0 MATIC</span>
                                </div>
                            </div>

                            <button id="buyTickets" class="purchase-btn" disabled>
                                <i class="fas fa-shopping-cart"></i>
                                <span id="buy-tickets-text">ุฎุฑุฏ ุจูุท</span>
                            </button>
                        </div>
                    </div>

                    <div class="ticket-info-card">
                        <h3><i class="fas fa-info-circle"></i> <span id="ticket-info-title">ุงุทูุงุนุงุช ุจูุทโูุง</span></h3>
                        <div class="user-tickets-info">
                            <div class="ticket-stats">
                                <div class="ticket-stat">
                                    <i class="fas fa-ticket-alt pool-1"></i>
                                    <div>
                                        <div id="user-pool1-label" class="stat-label">ุงุณุชุฎุฑ ููุฑู</div>
                                        <div id="userPool1Tickets" class="stat-value">0 ุจูุท</div>
                                    </div>
                                </div>
                                <div class="ticket-stat">
                                    <i class="fas fa-ticket-alt pool-2"></i>
                                    <div>
                                        <div id="user-pool2-label" class="stat-label">ุงุณุชุฎุฑ ุทูุง</div>
                                        <div id="userPool2Tickets" class="stat-value">0 ุจูุท</div>
                                    </div>
                                </div>
                                <div class="ticket-stat">
                                    <i class="fas fa-ticket-alt pool-3"></i>
                                    <div>
                                        <div id="user-pool3-label" class="stat-label">ุงุณุชุฎุฑ ุงููุงุณ</div>
                                        <div id="userPool3Tickets" class="stat-value">0 ุจูุท</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- P-Token Tab -->
            <div id="ptoken" class="tab-content">
                <div class="tab-header">
                    <h1><i class="fas fa-coins"></i> <span id="ptoken-title">ุชุจุฏู P-Token</span></h1>
                    <p id="ptoken-subtitle">ุชุจุฏู ุชูฺฉูโูุง P-Token ุจู MATIC</p>
                </div>

                <div class="ptoken-content">
                    <div class="ptoken-info-card">
                        <h3><i class="fas fa-chart-line"></i> <span id="ptoken-info-title">ุงุทูุงุนุงุช P-Token</span></h3>
                        <div class="ptoken-stats">
                            <div class="ptoken-stat">
                                <i class="fas fa-wallet"></i>
                                <div>
                                    <div id="ptoken-balance-label" class="stat-label">ููุฌูุฏ P-Token ุดูุง</div>
                                    <div id="userPTokenBalance" class="stat-value">0 P-Token</div>
                                </div>
                            </div>
                            <div class="ptoken-stat">
                                <i class="fas fa-dollar-sign"></i>
                                <div>
                                    <div id="ptoken-price-label" class="stat-label">ููุช ูุนู ูุฑ P-Token</div>
                                    <div id="ptokenPrice" class="stat-value">0 MATIC</div>
                                </div>
                            </div>
                            <div class="ptoken-stat">
                                <i class="fas fa-calculator"></i>
                                <div>
                                    <div id="ptoken-value-label" class="stat-label">ุงุฑุฒุด ฺฉู P-Token ุดูุง</div>
                                    <div id="totalPTokenValue" class="stat-value">0 MATIC</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ptoken-convert-card">
                        <h3><i class="fas fa-exchange-alt"></i> <span id="convert-title">ุชุจุฏู ุจู MATIC</span></h3>
                        <div class="convert-form">
                            <div class="form-group">
                                <label for="ptokenAmount">
                                    <i class="fas fa-coins"></i>
                                    <span id="ptoken-amount-label">ุชุนุฏุงุฏ P-Token ุจุฑุง ูุฑูุด</span>
                                </label>
                                <div class="input-with-buttons">
                                    <button class="quantity-btn" onclick="changePTokenAmount(-1)">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" id="ptokenAmount" min="1" value="1" class="ptoken-input">
                                    <button class="quantity-btn" onclick="changePTokenAmount(1)">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="form-hint">
                                    <i class="fas fa-info-circle"></i>
                                    <span id="ptoken-max-hint">ุญุฏุงฺฉุซุฑ ููุฌูุฏ ุดูุง: <span id="maxPTokenAmount">0</span> P-Token</span>
                                </div>
                            </div>

                            <div class="conversion-summary">
                                <div class="conversion-item">
                                    <span id="conversion-amount-label">ุชุนุฏุงุฏ P-Token:</span>
                                    <span id="conversionPToken">0</span>
                                </div>
                                <div class="conversion-item">
                                    <span id="conversion-price-label">ููุช ูุฑ ุชูฺฉู:</span>
                                    <span id="conversionPrice">0 MATIC</span>
                                </div>
                                <div class="conversion-item total">
                                    <span id="conversion-total-label">ุฏุฑุงูุช ุดูุง:</span>
                                    <span id="conversionTotal" class="total-price">0 MATIC</span>
                                </div>
                            </div>

                            <button id="sellPTokens" class="convert-btn" disabled>
                                <i class="fas fa-exchange-alt"></i>
                                <span id="sell-ptoken-text">ูุฑูุด P-Token ู ุฏุฑุงูุช MATIC</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Winners Tab -->
            <div id="winners" class="tab-content">
                <div class="tab-header">
                    <h1><i class="fas fa-trophy"></i> <span id="winners-title">ุจุฑูุฏฺฏุงู</span></h1>
                    <p id="winners-subtitle">ุจุฑูุฏฺฏุงู ุฎูุดโุดุงูุณ ูุงุชุฑ</p>
                </div>

                <div class="winners-list-section">
                    <h3><i class="fas fa-list"></i> <span id="recent-winners-title">ุจุฑูุฏฺฏุงู ุงุฎุฑ</span></h3>
                    <div id="recentWinners" class="winners-list">
                        <!-- Winners will be loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Wallet Selection Modal ููุจุงู -->
    <div id="walletModal" class="modal">
        <div class="modal-content mobile-modal">
            <div class="modal-header">
                <h2 id="wallet-modal-title">ุงุชุตุงู ฺฉู ูพูู</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="wallet-options-grid">
                    <!-- MetaMask -->
                    <div class="wallet-option popular" data-wallet="metamask">
                        <div class="wallet-icon">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" alt="MetaMask">
                        </div>
                        <div class="wallet-info">
                            <h3>MetaMask</h3>
                            <p>ูุฑูุฑฺฏุฑ ุฏุณฺฉุชุงูพ ู ููุจุงู</p>
                        </div>
                        <div class="wallet-badge">ูุญุจูุจ</div>
                    </div>
                    
                    <!-- Trust Wallet -->
                    <div class="wallet-option" data-wallet="trustwallet">
                        <div class="wallet-icon">
                            <img src="https://trustwallet.com/assets/images/media/assets/TWT.png" alt="Trust Wallet">
                        </div>
                        <div class="wallet-info">
                            <h3>Trust Wallet</h3>
                            <p>ุงูพูฺฉุดู ููุจุงู</p>
                        </div>
                    </div>
                    
                    <!-- Coinbase Wallet -->
                    <div class="wallet-option" data-wallet="coinbase">
                        <div class="wallet-icon">
                            <img src="https://cdn.iconscout.com/icon/free/png-256/coinbase-4-1174883.png" alt="Coinbase Wallet">
                        </div>
                        <div class="wallet-info">
                            <h3>Coinbase Wallet</h3>
                            <p>ูุฑูุฑฺฏุฑ ู ููุจุงู</p>
                        </div>
                    </div>

                    <!-- SafePal -->
                    <div class="wallet-option" data-wallet="safepal">
                        <div class="wallet-icon">
                            <img src="https://s.pvcliping.com/web/image_web/64906251-54d5-4589-a6d7-3a2f19d52d79.png" alt="SafePal">
                        </div>
                        <div class="wallet-info">
                            <h3>SafePal</h3>
                            <p>ููุช ุณุฎุชโุงูุฒุงุฑ ู ูุฑูโุงูุฒุงุฑ</p>
                        </div>
                    </div>

                    <!-- WalletConnect -->
                    <div class="wallet-option" data-wallet="walletconnect">
                        <div class="wallet-icon">
                            <img src="https://walletconnect.org/_next/static/media/logo_mark.84dd8525.svg" alt="WalletConnect">
                        </div>
                        <div class="wallet-info">
                            <h3>WalletConnect</h3>
                            <p>ุชูุงู ฺฉู ูพููโูุง ุณุงุฒฺฏุงุฑ</p>
                        </div>
                    </div>
                </div>
                
                <div class="wallet-footer">
                    <p>ุจุง ุงุชุตุงู ฺฉู ูพููุ ุจุง <a href="#">ููุงูู ู ููุฑุฑุงุช</a> ููุงููุช ูโฺฉูุฏ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Transaction Status Modal ููุจุงู -->
    <div id="transactionModal" class="modal">
        <div class="modal-content mobile-modal">
            <div class="modal-header">
                <h2 id="transaction-modal-title">ูุถุนุช ุชุฑุงฺฉูุด</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="transaction-status">
                    <div class="status-icon">
                        <i class="fas fa-sync-alt fa-spin"></i>
                    </div>
                    <h3 id="transaction-status-text">ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด...</h3>
                    <p id="transaction-details">ุชุฑุงฺฉูุด ุฏุฑ ุญุงู ุชุงุฏ ุฏุฑ ุจูุงฺฉ ฺู ุงุณุช</p>
                    <div class="transaction-hash">
                        <span id="tx-hash-label">ูุด ุชุฑุงฺฉูุด:</span>
                        <span id="tx-hash" class="hash-value">0x...</span>
                    </div>
                    <button class="view-on-polygonscan-btn" id="viewOnPolygonscan" style="display: none;">
                        <i class="fas fa-external-link-alt"></i>
                        ูุดุงูุฏู ุฏุฑ Polygonscan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>